# 链式模板集合

本文档提供 5 种常见软件工程场景的链式提示模板。每个模板都遵循核心的五阶段流程，并根据具体场景做了适配。

---

## 模板一：新功能开发

**适用场景：** 从零开始实现一个新功能或新模块。

### 链式步骤

```
步骤 1 — 需求拆解
├── 输入：用户的功能描述
├── 操作：
│   ├── 提取功能的核心用户故事
│   ├── 识别功能边界（什么在范围内，什么不在）
│   ├── 列出与现有模块的交互点
│   └── 确认验收标准
└── 输出：结构化需求文档

步骤 2 — 技术方案设计
├── 输入：结构化需求 + 现有代码架构
├── 操作：
│   ├── 设计数据模型 / 接口定义
│   ├── 规划文件和目录结构
│   ├── 选择实现所需的依赖和工具
│   └── 生成 2-3 种实现路径并对比
└── 输出：技术方案（含架构图或伪代码）

步骤 3 — 核心实现
├── 输入：选定的技术方案
├── 操作：
│   ├── 按依赖顺序创建文件
│   ├── 实现核心业务逻辑
│   ├── 处理关键的错误路径
│   └── 添加必要的类型定义
└── 输出：可运行的核心功能代码

步骤 4 — 测试与完善
├── 输入：核心功能代码
├── 操作：
│   ├── 编写单元测试覆盖主路径
│   ├── 编写边缘情况测试
│   ├── 运行测试并修复失败项
│   └── 补充文档注释（仅在逻辑不明显处）
└── 输出：经过测试的完整功能代码

步骤 5 — 集成验证
├── 输入：完整功能代码
├── 操作：
│   ├── 确认与现有模块的集成正确
│   ├── 运行全量测试套件
│   ├── 检查是否引入了破坏性变更
│   └── 生成变更摘要
└── 输出：可合并的代码 + 变更说明
```

---

## 模板二：Bug 修复

**适用场景：** 定位并修复已知的 Bug。

### 链式步骤

```
步骤 1 — Bug 复现与定位
├── 输入：Bug 报告（症状、复现步骤、期望行为）
├── 操作：
│   ├── 理解 Bug 的表象和触发条件
│   ├── 追踪代码执行路径
│   ├── 定位根因所在的代码位置
│   └── 区分根因和表象（避免治标不治本）
└── 输出：根因分析报告（含具体代码行）

步骤 2 — 修复方案制定
├── 输入：根因分析
├── 操作：
│   ├── 设计最小化修复方案（改动最少、风险最低）
│   ├── 评估修复是否会影响其他功能
│   ├── 考虑是否存在类似的潜在 Bug
│   └── 准备回归测试策略
└── 输出：修复方案 + 影响分析

步骤 3 — 实施修复
├── 输入：修复方案
├── 操作：
│   ├── 实施代码修改
│   ├── 编写针对该 Bug 的回归测试
│   ├── 确保测试能复现原始 Bug（先红后绿）
│   └── 验证修复有效
└── 输出：修复代码 + 回归测试

步骤 4 — 回归验证
├── 输入：修复后的代码
├── 操作：
│   ├── 运行完整测试套件
│   ├── 检查是否引入新问题
│   ├── 验证相关功能未受影响
│   └── 确认修复覆盖了所有触发条件
└── 输出：验证通过的修复 + 变更摘要
```

---

## 模板三：代码重构

**适用场景：** 在不改变外部行为的前提下改善代码结构。

### 链式步骤

```
步骤 1 — 现状评估
├── 输入：需要重构的代码区域
├── 操作：
│   ├── 识别代码异味（重复代码、过长函数、过深嵌套等）
│   ├── 梳理现有的依赖关系
│   ├── 确认当前测试覆盖率
│   └── 评估重构的收益和风险
└── 输出：代码质量评估报告

步骤 2 — 重构策略规划
├── 输入：评估报告
├── 操作：
│   ├── 确定重构目标（可读性、可测试性、解耦等）
│   ├── 选择合适的重构手法
│   ├── 规划重构顺序（小步前进，每步可验证）
│   └── 定义完成标准
└── 输出：分步重构计划

步骤 3 — 安全网构建
├── 输入：重构计划
├── 操作：
│   ├── 补充缺失的测试（确保重构前行为被测试覆盖）
│   ├── 运行现有测试确认全部通过
│   ├── 标记关键的不变量和约束
│   └── 确认可以安全回退
└── 输出：完善的测试安全网

步骤 4 — 逐步重构
├── 输入：重构计划 + 测试安全网
├── 操作：
│   ├── 按计划执行每一步重构
│   ├── 每步完成后运行测试确认行为不变
│   ├── 如测试失败，立即回退并分析原因
│   └── 保持提交粒度小且原子化
└── 输出：重构后的代码（所有测试通过）

步骤 5 — 验收确认
├── 输入：重构后的代码
├── 操作：
│   ├── 运行全量测试
│   ├── 对比重构前后的代码结构
│   ├── 确认达成重构目标
│   └── 清理临时代码和注释
└── 输出：最终的重构代码 + 变更说明
```

---

## 模板四：项目脚手架

**适用场景：** 初始化一个新项目或新模块的基础结构。

### 链式步骤

```
步骤 1 — 需求收集
├── 输入：项目类型和基本需求
├── 操作：
│   ├── 确认技术栈（语言、框架、工具链）
│   ├── 确认项目类型（库、CLI、Web 应用、API 服务等）
│   ├── 了解团队约定和偏好
│   └── 明确必须包含的基础设施（CI/CD、测试框架、Linter 等）
└── 输出：项目配置清单

步骤 2 — 结构设计
├── 输入：配置清单
├── 操作：
│   ├── 设计目录结构
│   ├── 规划模块划分
│   ├── 选择并配置开发工具链
│   └── 设计配置文件布局
└── 输出：项目结构蓝图

步骤 3 — 基础搭建
├── 输入：项目结构蓝图
├── 操作：
│   ├── 创建目录结构
│   ├── 初始化包管理和依赖
│   ├── 配置构建工具
│   ├── 配置代码质量工具（Linter、Formatter）
│   └── 设置测试框架
└── 输出：可运行的项目骨架

步骤 4 — 验证与文档
├── 输入：项目骨架
├── 操作：
│   ├── 验证构建流程正常
│   ├── 验证测试流程正常
│   ├── 验证开发服务器正常（如适用）
│   └── 添加 README 说明启动和开发流程
└── 输出：完整可用的项目脚手架
```

---

## 模板五：文档创作

**适用场景：** 编写技术文档、API 文档、使用指南等。

### 链式步骤

```
步骤 1 — 受众与目标分析
├── 输入：文档需求
├── 操作：
│   ├── 明确目标读者（开发者、用户、运维等）
│   ├── 确定文档类型（教程、参考、指南、说明）
│   ├── 阅读相关源码以确保技术准确性
│   └── 收集需要覆盖的主题点
└── 输出：文档大纲 + 受众画像

步骤 2 — 内容规划
├── 输入：文档大纲
├── 操作：
│   ├── 设计章节结构和阅读顺序
│   ├── 为每个章节规划关键内容点
│   ├── 确定需要的代码示例
│   └── 规划图表和视觉辅助
└── 输出：详细的内容规划

步骤 3 — 内容撰写
├── 输入：内容规划
├── 操作：
│   ├── 按章节撰写正文
│   ├── 编写代码示例（确保可运行）
│   ├── 添加必要的警告和注意事项
│   └── 保持语言风格统一
└── 输出：文档初稿

步骤 4 — 审校优化
├── 输入：文档初稿
├── 操作：
│   ├── 检查技术准确性（对照源码）
│   ├── 验证代码示例可运行
│   ├── 优化表述清晰度
│   └── 检查格式统一性
└── 输出：定稿文档
```

---

## 使用建议

1. **按需选用**：不必每次都完整执行模板的所有步骤，根据任务复杂度灵活裁剪
2. **关注衔接**：每个步骤的输出应能自然衔接到下一步骤的输入
3. **允许回溯**：如果某个步骤的结果不满意，可以回退到上一步重新执行
4. **积累经验**：随着使用次数增加，逐步形成适合自己项目的模板变体
